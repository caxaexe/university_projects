# Лабораторная работа №7. Манипулирование ошибками и их протоколирование

## Требования к лабораторной работе

1. Обработайте ошибки и правильно информируйте пользователя о том что он может дальше
сделать в приложении;
2. Все ошибки и предупреждения запротоколируйте – создавая текстовой файл;
3. Объясните преподавателю, почему текст ошибки приложения, видимый простому
пользователю, может быть уязвимостью для веб-приложения.
4. Создайте файл, который будет отвечать за генерацию страницы-«убежища» для
пользователя в случае ошибки. Объясните преподавателю необходимость этой страницы,
почему она должна быть статической (а не динамически генерируемой) и почему в её
содержимом должна быть хотя бы одна ссылка, чтобы пользователь мог вернуться в вебприложение.
5. Добавьте опцию администратору при помощи которой администратор сможет посмотреть
файл ошибок (только после проверки роли).

## Ход работы

Для проверки ошибок создаю файл `test_error.php`:
```php
<?php

session_start();

require_once __DIR__ . '/../config/error_logger.php';

undefined_function_123();

echo "Если ты видишь это — ошибка не поймана";
```
Перехожу по URL `http://localhost/sawmlab7/tests/test_error.php` и попадаю в файл `error_safe.php`, который является страницей-убежищем в данном случае:  
  
<img width="640" height="374" alt="image" src="https://github.com/user-attachments/assets/c2260460-c8c2-4150-b85d-a7b480be528f" />
  
Админ-панель:  
  
<img width="1054" height="452" alt="image" src="https://github.com/user-attachments/assets/00d0e300-e33b-4869-92dc-ee6abf6cfa15" />  
<img width="1646" height="621" alt="image" src="https://github.com/user-attachments/assets/13afed31-fc6e-48ea-83e1-8eac3910e8af" />

- Почему текст ошибки для пользователя может быть уязвимостью:  
Если пользователю показывается подробный текст ошибки (например, SQL-запрос, путь к файлу, стек вызовов), злоумышленник может использовать эту информацию для поиска уязвимостей и проведения атак на веб-приложение.

- Необходимость страницы ошибки:  
Она информирует пользователя о возникшей проблеме, не раскрывая конфиденциальные детали системы, и предотвращает дезориентацию пользователя.

- Почему страница должна быть статической:  
Статическая страница не выполняет код, поэтому снижает риск уязвимостей и предотвращает дополнительные ошибки при отображении.

- Почему нужна хотя бы одна ссылка на возврат в приложение:  
Это обеспечивает удобство пользователя, позволяя безопасно вернуться на рабочие страницы без необходимости вручную вводить URL или перезапускать приложение.
